{% extends "base.html" %}
{% block content %}
<h2 class="fw-bold text-primary text-center mb-4">THƯ VIỆN CÔNG TRÌNH</h2>

<div class="container">
  <div class="row g-4 justify-content-center">
    {% for img in images %}
      <div class="col-lg-3 col-md-4 col-sm-6 text-center">
        <div class="card shadow-sm border-0">
          <a href="{{ url_for('static', filename='uploads/' ~ img) }}" data-bs-toggle="modal" data-bs-target="#imageModal" data-img="{{ url_for('static', filename='uploads/' ~ img) }}">
            <img src="{{ url_for('static', filename='uploads/' ~ img) }}" class="card-img-top rounded" alt="Công trình {{ loop.index }}">
          </a>
        </div>
      </div>
    {% else %}
      <p class="text-muted text-center mt-5">Chưa có ảnh nào được tải lên.</p>
    {% endfor %}
  </div>
</div>

<!-- Modal hiển thị ảnh lớn -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content bg-dark">
      <div class="modal-body text-center">
        <img id="modalImage" src="" class="img-fluid rounded" alt="Hình công trình">
      </div>
    </div>
  </div>
</div>

<!-- Script cho hiệu ứng phóng to -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const imageModal = document.getElementById('imageModal');
  imageModal.addEventListener('show.bs.modal', function (event) {
    const button = event.relatedTarget;
    const imgSrc = button.getAttribute('data-img');
    const modalImg = document.getElementById('modalImage');
    modalImg.src = imgSrc;
  });
});
</script>

<style>
  body {
    background-color: #f7f9fc;
  }
  .card img {
    height: 200px;
    object-fit: cover;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .card img:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
  }
  h2 {
    letter-spacing: 1px;
  }
</style>
{% endblock %}